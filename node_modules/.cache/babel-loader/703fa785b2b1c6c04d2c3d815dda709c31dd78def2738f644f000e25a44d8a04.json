{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getCookie, setCookie } from '@/services/cookies/cookieUtils';\nimport { getGamesData } from '@/services/api/gamesAPI';\nimport GalleryOptions from './GalleryOptions.vue';\nimport GameCard from './GameCard.vue';\nexport default {\n  name: 'GamesGallery',\n  components: {\n    GameCard,\n    GalleryOptions\n  },\n  data() {\n    return {\n      gamesData: [],\n      favorites: [],\n      search: localStorage.getItem(\"search\") || \"\",\n      gamesSortType: localStorage.getItem(\"gamesSortType\") || \"default\",\n      gamesFilterPlat: localStorage.getItem(\"gamesFilterPlat\") || \"All\",\n      gamesFilterGenre: localStorage.getItem(\"gamesFilterGenre\") || \"default\",\n      gridView: localStorage.getItem(\"gridView\") === \"true\"\n    };\n  },\n  computed: {\n    searchingList() {\n      return this.gamesData.filter(gamesData => {\n        return gamesData.title.toLowerCase().includes(this.search.toLowerCase());\n      });\n    },\n    gamesOrganizedData: function () {\n      let sortedData = this.gamesData.slice();\n      const field = [\"AZName\", \"ZAName\"].includes(this.gamesSortType) ? \"title\" : [\"RecenttoOld\", \"OldtoRecent\"].includes(this.gamesSortType) ? \"release_date\" : [\"default\"].includes(this.gamesSortType);\n      const reversed = [\"ZAName\", \"OldtoRecent\"].includes(this.gamesSortType);\n      sortedData = this.searchingList.slice().sort((a, b) => {\n        if (field === \"title\") {\n          return a[field].localeCompare(b[field]);\n        } else if (field === \"release_date\") {\n          return Date.parse(a[field]) - Date.parse(b[field]);\n        }\n      });\n      if (reversed) sortedData = sortedData.reverse();\n      return sortedData;\n    },\n    gamesFilteredPlatData: function () {\n      let filteredData = this.gamesOrganizedData;\n      console.log(this.gamesFilterPlat);\n      if (this.gamesFilterPlat !== 'All') {\n        filteredData = filteredData.filter(item => item.platform === this.gamesFilterPlat);\n      }\n      return filteredData;\n    },\n    gamesFilteredGenreData: function () {\n      let filteredData = this.gamesFilteredPlatData;\n      if (this.gamesFilterGenre !== 'default') {\n        filteredData = filteredData.filter(game => game.genre === this.gamesFilterGenre);\n      }\n      return filteredData;\n    }\n  },\n  created: function () {\n    this.retrieveGamesData();\n    const favoritesCookie = getCookie('favorites');\n    if (favoritesCookie) {\n      this.$emit('update:favorites', JSON.parse(favoritesCookie));\n      console.log(this);\n    }\n    const isLikedCookie = getCookie(`isLiked_${this.id}`);\n    if (isLikedCookie) {\n      this.isLiked = isLikedCookie === 'true';\n    }\n  },\n  methods: {\n    async retrieveGamesData() {\n      this.gamesData = await getGamesData();\n    },\n    toggleLike(gameId) {\n      const game = this.gamesFilteredGenreData.find(game => game.id === gameId);\n      if (game) {\n        game.isLiked = !game.isLiked;\n        if (game.isLiked) {\n          this.favorites.push(game.id);\n        } else {\n          const index = this.favorites.indexOf(game.id);\n          if (index !== -1) {\n            this.favorites.splice(index, 1);\n          }\n        }\n        setCookie('favorites', JSON.stringify(this.favorites), 30);\n        setCookie(`isLiked_${game.id}`, game.isLiked.toString(), 30);\n        console.log(document.cookie);\n        this.$emit('update:toggleLike', gameId);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["getCookie","setCookie","getGamesData","GalleryOptions","GameCard","name","components","data","gamesData","favorites","search","localStorage","getItem","gamesSortType","gamesFilterPlat","gamesFilterGenre","gridView","computed","searchingList","filter","title","toLowerCase","includes","gamesOrganizedData","sortedData","slice","field","reversed","sort","a","b","localeCompare","Date","parse","reverse","gamesFilteredPlatData","filteredData","console","log","item","platform","gamesFilteredGenreData","game","genre","created","retrieveGamesData","favoritesCookie","$emit","JSON","isLikedCookie","id","isLiked","methods","toggleLike","gameId","find","push","index","indexOf","splice","stringify","toString","document","cookie"],"sourceRoot":"","sources":["C:\\Users\\charl\\Documents\\IMAC\\2A\\S2\\PROG-WEB\\projet\\src\\components\\GamesGallery.vue"],"sourcesContent":["<template>\r\n\r\n    <GalleryOptions v-model:search=\"search\" \r\n    v-model:gamesSortType=\"gamesSortType\"\r\n    v-model:gamesFilterPlat=\"gamesFilterPlat\"\r\n    v-model:gamesFilterGenre=\"gamesFilterGenre\"\r\n    :gamesFilteredGenreData=\"gamesFilteredGenreData\"\r\n    v-model:gridView=\"gridView\"\r\n    />\r\n\r\n\r\n    <div class=\"games-gallery\">\r\n\r\n        <GameCard \r\n\r\n            v-for=\"game in gamesFilteredGenreData\" \r\n            :key=\"game.id\"\r\n            :id=\"game.id\"\r\n            :title=\"game.title\"\r\n            :thumbnail=\"game.thumbnail\"\r\n            :short_description=\"game.short_description\"  \r\n            :genre=\"game.genre\"\r\n            :platform=\"game.platform\"\r\n\r\n            :isLiked=\"favorites.includes(game.id)\"\r\n            @toggleLike=\"toggleLike(game.id)\"\r\n\r\n            :gridView=\"gridView\"\r\n            \r\n        />\r\n    \r\n             \r\n    </div>\r\n\r\n    <div v-if=\"favorites.length === 0\">\r\n        <h2>Oups</h2>\r\n        <p>Vous n'avez pas de favoris</p>\r\n    </div>\r\n\r\n    <div v-if=\"search && searchingList.length == []\">\r\n        <h2>Oups</h2>\r\n        <p>Aucun résultat trouvé</p>\r\n\r\n    </div>\r\n\r\n    <div v-if=\"!search && searchingList.length == []\">\r\n        <h2>Loading ...</h2>\r\n        <i class=\"fas fa-spinner fa-pulse fa-xl\"></i>\r\n\r\n    </div>\r\n  \r\n  \r\n  </template>\r\n  \r\n  <script>\r\n\r\n    import { getCookie, setCookie } from '@/services/cookies/cookieUtils';\r\n  \r\n    import { getGamesData } from '@/services/api/gamesAPI';\r\n\r\n    \r\n\r\n    import GalleryOptions from './GalleryOptions.vue'\r\n    import GameCard from './GameCard.vue';\r\n  \r\n    export default {\r\n    name : 'GamesGallery',\r\n  \r\n    components : {\r\n        GameCard,\r\n        GalleryOptions\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            gamesData : [],\r\n\r\n            favorites : [],\r\n\r\n            search: localStorage.getItem(\"search\") || \"\",\r\n\t\t\tgamesSortType: localStorage.getItem(\"gamesSortType\") || \"default\",\r\n            gamesFilterPlat: localStorage.getItem(\"gamesFilterPlat\") || \"All\",\r\n            gamesFilterGenre: localStorage.getItem(\"gamesFilterGenre\") || \"default\",\r\n\r\n            gridView: localStorage.getItem(\"gridView\") === \"true\",\r\n\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        searchingList(){\r\n            return this.gamesData.filter((gamesData) => {\r\n                return gamesData.title.toLowerCase().includes(this.search.toLowerCase());\r\n            })\r\n        },\r\n        \r\n        gamesOrganizedData: function() {\r\n            let sortedData = this.gamesData.slice()\r\n            const field = [\"AZName\", \"ZAName\"].includes(this.gamesSortType) ? \"title\" : [\"RecenttoOld\", \"OldtoRecent\"].includes(this.gamesSortType) ? \"release_date\" : [\"default\"].includes(this.gamesSortType);\r\n            const reversed = [\"ZAName\", \"OldtoRecent\"].includes(this.gamesSortType)\r\n            sortedData = this.searchingList.slice().sort((a, b) => {\r\n                if (field === \"title\") {\r\n                return a[field].localeCompare(b[field])\r\n                } else if (field === \"release_date\") {\r\n                return Date.parse(a[field]) - Date.parse(b[field])\r\n                }\r\n            })\r\n            if (reversed) sortedData = sortedData.reverse()\r\n            return sortedData\r\n\r\n        },\r\n\r\n        gamesFilteredPlatData: function() {        \r\n            let filteredData = this.gamesOrganizedData;\r\n            console.log(this.gamesFilterPlat)\r\n            if (this.gamesFilterPlat !== 'All') {\r\n                filteredData = filteredData.filter(item => item.platform === this.gamesFilterPlat);\r\n            }\r\n            return filteredData;\r\n        },\r\n\r\n        gamesFilteredGenreData: function() {\r\n        let filteredData = this.gamesFilteredPlatData;\r\n        if (this.gamesFilterGenre !== 'default') {\r\n            filteredData = filteredData.filter(game => game.genre === this.gamesFilterGenre);\r\n        }\r\n        return filteredData;\r\n        }\r\n    },\r\n\r\n\r\n    created: function(){\r\n\r\n        this.retrieveGamesData();\r\n\r\n        const favoritesCookie = getCookie('favorites');\r\n        if (favoritesCookie) {\r\n            this.$emit('update:favorites', JSON.parse(favoritesCookie));\r\n            console.log(this)\r\n        }\r\n\r\n        const isLikedCookie = getCookie(`isLiked_${this.id}`);\r\n        if (isLikedCookie) {\r\n            this.isLiked = isLikedCookie === 'true';\r\n        }\r\n    },\r\n  \r\n    methods: {\r\n      \r\n        async retrieveGamesData(){\r\n            this.gamesData = await getGamesData()\r\n        },\r\n\r\n        toggleLike(gameId) {\r\n            const game = this.gamesFilteredGenreData.find(game => game.id === gameId);\r\n            if (game) {\r\n                game.isLiked = !game.isLiked;\r\n                if (game.isLiked) {\r\n                    this.favorites.push(game.id);\r\n                } else {\r\n                    const index = this.favorites.indexOf(game.id);\r\n                    if (index !== -1) {\r\n                        this.favorites.splice(index, 1);\r\n                    }\r\n                }\r\n                setCookie('favorites', JSON.stringify(this.favorites), 30);\r\n                setCookie(`isLiked_${game.id}`, game.isLiked.toString(), 30);\r\n                console.log(document.cookie);\r\n\r\n                this.$emit('update:toggleLike', gameId);\r\n            }\r\n        },\r\n        \r\n    },\r\n  }\r\n \r\n  </script>\r\n  \r\n  <style scoped>\r\n   .games-gallery{\r\n        display: flex;\r\n        justify-content: center;\r\n        flex-wrap: wrap;\r\n    }\r\n    \r\n  </style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}