{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getCookie, setCookie } from '@/services/cookies/cookieUtils';\nimport { getGamesData } from '@/services/api/gamesAPI';\nimport GalleryOptions from './GalleryOptions.vue';\nimport GameCard from './GameCard.vue';\nexport default {\n  name: 'GamesGallery',\n  components: {\n    GameCard,\n    GalleryOptions\n  },\n  data() {\n    return {\n      gamesData: [],\n      favorites: [],\n      search: localStorage.getItem(\"search\") || \"\",\n      gamesSortType: localStorage.getItem(\"gamesSortType\") || \"default\",\n      gamesFilterPlat: localStorage.getItem(\"gamesFilterPlat\") || \"All\",\n      gamesFilterGenre: localStorage.getItem(\"gamesFilterGenre\") || \"default\",\n      gridView: localStorage.getItem(\"gridView\") === true,\n      gamesSortFavorites: localStorage.getItem(\"gamesSortFavorites\") === false\n    };\n  },\n  created: function () {\n    this.retrieveGamesData();\n    let favoritesCookie = getCookie('favorites');\n    if (favoritesCookie) {\n      this.favorites = JSON.parse(favoritesCookie);\n    }\n  },\n  computed: {\n    searchingList() {\n      return this.gamesData.filter(gamesData => {\n        return gamesData.title.toLowerCase().includes(this.search.toLowerCase());\n      });\n    }\n\n    /*\r\n    gamesOrganizedData: function() {\r\n        let sortedData = this.gamesData.slice()\r\n        const field = [\"AZName\", \"ZAName\"].includes(this.gamesSortType) ? \"title\" : [\"RecenttoOld\", \"OldtoRecent\"].includes(this.gamesSortType) ? \"release_date\" : [\"default\"].includes(this.gamesSortType);\r\n        const reversed = [\"ZAName\", \"OldtoRecent\"].includes(this.gamesSortType)\r\n        sortedData = this.searchingList.slice().sort((a, b) => {\r\n            if (field === \"title\") {\r\n            return a[field].localeCompare(b[field])\r\n            } else if (field === \"release_date\") {\r\n            return Date.parse(a[field]) - Date.parse(b[field])\r\n            }\r\n        })\r\n        if (reversed) sortedData = sortedData.reverse()\r\n        return sortedData\r\n      },\r\n      gamesFilteredPlatData: function() {        \r\n        let filteredData = this.gamesOrganizedData;\r\n        if (this.gamesFilterPlat !== 'All') {\r\n            filteredData = filteredData.filter(item => item.platform === this.gamesFilterPlat);\r\n        }\r\n        return filteredData;\r\n    },\r\n      gamesFilteredGenreData: function() {\r\n        let filteredData = this.gamesFilteredPlatData;\r\n        if (this.gamesFilterGenre !== 'default') {\r\n            filteredData = filteredData.filter(game => game.genre === this.gamesFilterGenre);\r\n        }\r\n        return filteredData;\r\n    },\r\n      gamesFilteredFavoritesData: function() {\r\n        let favoritesData = this.gamesFilteredGenreData;\r\n        if (this.gamesSortFavorites === true) {\r\n            favoritesData = favoritesData.filter(game => this.favorites.includes(game.id));\r\n        }\r\n        return favoritesData;\r\n    },*/\n  },\n\n  methods: {\n    async retrieveGamesData() {\n      this.gamesData = await getGamesData();\n    },\n    toggleLike(gameId) {\n      console.log(document.cookie);\n      const game = this.gamesFilteredGenreData.find(game => game.id === gameId);\n      if (game) {\n        if (!this.isGameLiked(game.id)) {\n          this.favorites.push(game.id);\n        } else {\n          const index = this.favorites.indexOf(game.id);\n          if (index !== -1) {\n            this.favorites.splice(index, 1);\n          }\n        }\n        setCookie('favorites', JSON.stringify(this.favorites), 30);\n        console.log(document.cookie);\n        /* Supprimer les cookies si y a un soucis */\n        /*var Cookies = document.cookie.split(';');\r\n        // set past expiry to all cookies\r\n        for (var i = 0; i < Cookies.length; i++) {\r\n        document.cookie = Cookies[i] + \"=; expires=\"+ new Date(0).toUTCString();\r\n        }*/\n      }\n    },\n\n    toggleSortFavorites() {\n      this.gamesSortFavorites = !this.gamesSortFavorites;\n      localStorage.setItem(\"gamesSortFavorites\", this.gamesSortFavorites);\n    },\n    isGameLiked(gameId) {\n      return this.favorites.includes(gameId);\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["getCookie","setCookie","getGamesData","GalleryOptions","GameCard","name","components","data","gamesData","favorites","search","localStorage","getItem","gamesSortType","gamesFilterPlat","gamesFilterGenre","gridView","gamesSortFavorites","created","retrieveGamesData","favoritesCookie","JSON","parse","computed","searchingList","filter","title","toLowerCase","includes","methods","toggleLike","gameId","console","log","document","cookie","game","gamesFilteredGenreData","find","id","isGameLiked","push","index","indexOf","splice","stringify","toggleSortFavorites","setItem"],"sourceRoot":"","sources":["C:\\Users\\charl\\Documents\\IMAC\\2A\\S2\\PROG-WEB\\projet\\src\\components\\GamesGallery.vue"],"sourcesContent":["<template>\r\n\r\n    <GalleryOptions v-model:search=\"search\" \r\n    v-model:gamesSortType=\"gamesSortType\"\r\n    v-model:gamesFilterPlat=\"gamesFilterPlat\"\r\n    v-model:gamesFilterGenre=\"gamesFilterGenre\"\r\n\r\n\r\n    :gamesFilteredGenreData=\"gamesFilteredGenreData\"\r\n    v-model:gridView=\"gridView\"\r\n    v-model:gamesSortFavorites=\"gamesSortFavorites\"\r\n    @toggleSortFavorites=\"toggleSortFavorites\"\r\n    :favorites=\"favorites\"\r\n    />\r\n\r\n\r\n    <div class=\"games-gallery\">\r\n\r\n        <GameCard \r\n\r\n            v-for=\"game in gamesFilteredFavoritesData\" \r\n            :key=\"game.id\"\r\n            :id=\"game.id\"\r\n            :title=\"game.title\"\r\n            :thumbnail=\"game.thumbnail\"\r\n            :short_description=\"game.short_description\"  \r\n            :genre=\"game.genre\"\r\n            :platform=\"game.platform\"\r\n\r\n            @toggleLike=\"toggleLike(game.id)\" \r\n            :isLiked=\"isGameLiked(game.id)\"\r\n       \r\n            :gridView=\"gridView\"     \r\n        />\r\n    \r\n             \r\n    </div>\r\n\r\n\r\n    <div v-if=\"search && searchingList.length == []\">\r\n        <h2>Oups</h2>\r\n        <p>Aucun résultat trouvé</p>\r\n\r\n    </div>\r\n\r\n    <div v-if=\"!search && searchingList.length == []\">\r\n        <h2>Loading ...</h2>\r\n        <i class=\"fas fa-spinner fa-pulse fa-xl\"></i>\r\n\r\n    </div>\r\n  \r\n  \r\n  </template>\r\n  \r\n  <script>\r\n\r\n    import { getCookie, setCookie } from '@/services/cookies/cookieUtils';\r\n  \r\n    import { getGamesData } from '@/services/api/gamesAPI';\r\n\r\n    \r\n\r\n    import GalleryOptions from './GalleryOptions.vue'\r\n    import GameCard from './GameCard.vue';\r\n  \r\n    export default {\r\n    name : 'GamesGallery',\r\n  \r\n    components : {\r\n        GameCard,\r\n        GalleryOptions\r\n    },\r\n\r\n\r\n    data() {\r\n        return {\r\n            gamesData : [],\r\n\r\n            favorites : [],\r\n\r\n            search: localStorage.getItem(\"search\") || \"\",\r\n\t\t\tgamesSortType: localStorage.getItem(\"gamesSortType\") || \"default\",\r\n            gamesFilterPlat: localStorage.getItem(\"gamesFilterPlat\") || \"All\",\r\n            gamesFilterGenre: localStorage.getItem(\"gamesFilterGenre\") || \"default\",\r\n\r\n            gridView: localStorage.getItem(\"gridView\") === true,\r\n            \r\n            gamesSortFavorites: localStorage.getItem(\"gamesSortFavorites\") === false,\r\n        }\r\n    },\r\n\r\n    created: function(){\r\n\r\n        this.retrieveGamesData();\r\n\r\n        let favoritesCookie = getCookie('favorites');\r\n        if (favoritesCookie) {\r\n            this.favorites = JSON.parse(favoritesCookie); \r\n        }\r\n    },\r\n\r\n\r\n    computed: {\r\n        \r\n        searchingList(){\r\n            return this.gamesData.filter((gamesData) => {\r\n                return gamesData.title.toLowerCase().includes(this.search.toLowerCase());\r\n            })\r\n        },\r\n\r\n      \r\n        \r\n        /*\r\n        gamesOrganizedData: function() {\r\n            let sortedData = this.gamesData.slice()\r\n            const field = [\"AZName\", \"ZAName\"].includes(this.gamesSortType) ? \"title\" : [\"RecenttoOld\", \"OldtoRecent\"].includes(this.gamesSortType) ? \"release_date\" : [\"default\"].includes(this.gamesSortType);\r\n            const reversed = [\"ZAName\", \"OldtoRecent\"].includes(this.gamesSortType)\r\n            sortedData = this.searchingList.slice().sort((a, b) => {\r\n                if (field === \"title\") {\r\n                return a[field].localeCompare(b[field])\r\n                } else if (field === \"release_date\") {\r\n                return Date.parse(a[field]) - Date.parse(b[field])\r\n                }\r\n            })\r\n            if (reversed) sortedData = sortedData.reverse()\r\n            return sortedData\r\n\r\n        },\r\n\r\n        gamesFilteredPlatData: function() {        \r\n            let filteredData = this.gamesOrganizedData;\r\n            if (this.gamesFilterPlat !== 'All') {\r\n                filteredData = filteredData.filter(item => item.platform === this.gamesFilterPlat);\r\n            }\r\n            return filteredData;\r\n        },\r\n\r\n        gamesFilteredGenreData: function() {\r\n            let filteredData = this.gamesFilteredPlatData;\r\n            if (this.gamesFilterGenre !== 'default') {\r\n                filteredData = filteredData.filter(game => game.genre === this.gamesFilterGenre);\r\n            }\r\n            return filteredData;\r\n        },\r\n\r\n        gamesFilteredFavoritesData: function() {\r\n            let favoritesData = this.gamesFilteredGenreData;\r\n            if (this.gamesSortFavorites === true) {\r\n                favoritesData = favoritesData.filter(game => this.favorites.includes(game.id));\r\n            }\r\n            return favoritesData;\r\n        },*/\r\n        \r\n    },\r\n\r\n  \r\n    methods: {\r\n        \r\n        async retrieveGamesData(){\r\n            this.gamesData = await getGamesData()\r\n        },\r\n\r\n        \r\n        toggleLike(gameId) {\r\n            console.log(document.cookie);\r\n            const game = this.gamesFilteredGenreData.find(game => game.id === gameId);\r\n            if (game) {                \r\n                if (!this.isGameLiked(game.id)) {\r\n                    this.favorites.push(game.id);\r\n                }\r\n                else {\r\n                    const index = this.favorites.indexOf(game.id);\r\n                    if (index !== -1) {\r\n                        this.favorites.splice(index, 1);\r\n                    }\r\n                }\r\n                setCookie('favorites', JSON.stringify(this.favorites), 30);\r\n                console.log(document.cookie);\r\n                /* Supprimer les cookies si y a un soucis */\r\n                /*var Cookies = document.cookie.split(';');\r\n                // set past expiry to all cookies\r\n                for (var i = 0; i < Cookies.length; i++) {\r\n                document.cookie = Cookies[i] + \"=; expires=\"+ new Date(0).toUTCString();\r\n                }*/\r\n            }\r\n        },\r\n\r\n        toggleSortFavorites() {\r\n            this.gamesSortFavorites = !this.gamesSortFavorites;\r\n            localStorage.setItem(\"gamesSortFavorites\", this.gamesSortFavorites);\r\n        },\r\n\r\n        \r\n        isGameLiked(gameId) {\r\n            return this.favorites.includes(gameId);\r\n        },\r\n      \r\n        \r\n    },\r\n}\r\n \r\n  </script>\r\n  \r\n  <style scoped>\r\n   .games-gallery{\r\n        display: flex;\r\n        justify-content: center;\r\n        flex-wrap: wrap;\r\n    }\r\n    \r\n  </style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}