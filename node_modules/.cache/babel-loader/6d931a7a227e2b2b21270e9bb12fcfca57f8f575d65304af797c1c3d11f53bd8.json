{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getCookie, setCookie } from '@/services/cookies/cookieUtils';\nimport { getGamesData } from '@/services/api/gamesAPI';\nimport GalleryOptions from './GalleryOptions.vue';\nimport GameCard from './GameCard.vue';\nexport default {\n  name: 'GamesGallery',\n  components: {\n    GameCard,\n    GalleryOptions\n  },\n  data() {\n    return {\n      gamesData: [],\n      favorites: [],\n      search: localStorage.getItem(\"search\") || \"\",\n      gamesSortType: localStorage.getItem(\"gamesSortType\") || \"default\",\n      gamesFilterPlat: localStorage.getItem(\"gamesFilterPlat\") || \"All\",\n      gamesFilterGenre: localStorage.getItem(\"gamesFilterGenre\") || \"default\",\n      gridView: localStorage.getItem(\"gridView\") === true,\n      gamesSortFavorites: localStorage.getItem(\"gamesSortFavorites\") === true\n    };\n  },\n  created: function () {\n    this.retrieveGamesData();\n    const favoritesCookie = getCookie('favorites');\n    if (favoritesCookie) {\n      this.favorites = JSON.parse(favoritesCookie);\n    }\n  },\n  computed: {\n    searchingList() {\n      return this.gamesData.filter(gamesData => {\n        return gamesData.title.toLowerCase().includes(this.search.toLowerCase());\n      });\n    },\n    gamesOrganizedData: function () {\n      let sortedData = this.gamesData.slice();\n      const field = [\"AZName\", \"ZAName\"].includes(this.gamesSortType) ? \"title\" : [\"RecenttoOld\", \"OldtoRecent\"].includes(this.gamesSortType) ? \"release_date\" : [\"default\"].includes(this.gamesSortType);\n      const reversed = [\"ZAName\", \"OldtoRecent\"].includes(this.gamesSortType);\n      sortedData = this.searchingList.slice().sort((a, b) => {\n        if (field === \"title\") {\n          return a[field].localeCompare(b[field]);\n        } else if (field === \"release_date\") {\n          return Date.parse(a[field]) - Date.parse(b[field]);\n        }\n      });\n      if (reversed) sortedData = sortedData.reverse();\n      return sortedData;\n    },\n    gamesFilteredPlatData: function () {\n      let filteredData = this.gamesOrganizedData;\n      console.log(this.gamesFilterPlat);\n      if (this.gamesFilterPlat !== 'All') {\n        filteredData = filteredData.filter(item => item.platform === this.gamesFilterPlat);\n      }\n      return filteredData;\n    },\n    gamesFilteredGenreData: function () {\n      let filteredData = this.gamesFilteredPlatData;\n      if (this.gamesFilterGenre !== 'default') {\n        filteredData = filteredData.filter(game => game.genre === this.gamesFilterGenre);\n      }\n      return filteredData;\n    }\n  },\n  methods: {\n    async retrieveGamesData() {\n      this.gamesData = await getGamesData();\n    },\n    isGameLiked(gameId) {\n      return this.favorites.includes(gameId);\n    },\n    toggleLike(gameId) {\n      const game = this.gamesFilteredGenreData.find(game => game.id === gameId);\n      if (game) {\n        game.isLiked = !game.isLiked;\n        if (game.isLiked) {\n          this.favorites.push(game.id);\n        } else {\n          const index = this.favorites.indexOf(game.id);\n          if (index !== -1) {\n            this.favorites.splice(index, 1);\n          }\n        }\n        setCookie('favorites', JSON.stringify(this.favorites), 30);\n        console.log(document.cookie);\n        /* Supprimer les cookies si y a un soucis */\n        /*var Cookies = document.cookie.split(';');\r\n        // set past expiry to all cookies\r\n        for (var i = 0; i < Cookies.length; i++) {\r\n        document.cookie = Cookies[i] + \"=; expires=\"+ new Date(0).toUTCString();\r\n        }*/\n      }\n    },\n\n    toggleSortFavorites() {\n      this.gamesSortFavorites = !this.gamesSortFavorites;\n      localStorage.setItem(\"gamesSortFavorites\", this.gamesSortFavorites);\n      let favoritesData = this.gamesFilteredGenreData;\n      if (this.gamesSortFavorites !== true) {\n        favoritesData = favoritesData.filter(game => game.genre === this.gamesFilterGenre);\n      }\n      return favoritesData;\n      if (this.gamesSortFavorites) {\n        // Filtrer les jeux en fonction des favoris\n        this.gamesFilteredGenreData = this.gamesFilteredPlatData.filter(game => this.favorites.includes(game.id));\n      } else {\n        // Utiliser les jeux filtrés normalement\n        this.gamesFilteredGenreData = this.gamesFilteredPlatData;\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["getCookie","setCookie","getGamesData","GalleryOptions","GameCard","name","components","data","gamesData","favorites","search","localStorage","getItem","gamesSortType","gamesFilterPlat","gamesFilterGenre","gridView","gamesSortFavorites","created","retrieveGamesData","favoritesCookie","JSON","parse","computed","searchingList","filter","title","toLowerCase","includes","gamesOrganizedData","sortedData","slice","field","reversed","sort","a","b","localeCompare","Date","reverse","gamesFilteredPlatData","filteredData","console","log","item","platform","gamesFilteredGenreData","game","genre","methods","isGameLiked","gameId","toggleLike","find","id","isLiked","push","index","indexOf","splice","stringify","document","cookie","toggleSortFavorites","setItem","favoritesData"],"sourceRoot":"","sources":["C:\\Users\\charl\\Documents\\IMAC\\2A\\S2\\PROG-WEB\\projet\\src\\components\\GamesGallery.vue"],"sourcesContent":["<template>\r\n\r\n    <GalleryOptions v-model:search=\"search\" \r\n    v-model:gamesSortType=\"gamesSortType\"\r\n    v-model:gamesFilterPlat=\"gamesFilterPlat\"\r\n    v-model:gamesFilterGenre=\"gamesFilterGenre\"\r\n    :gamesFilteredGenreData=\"gamesFilteredGenreData\"\r\n    v-model:gridView=\"gridView\"\r\n    v-model:gamesSortFavorites=\"gamesSortFavorites\"\r\n    @toggleSortFavorites=\"toggleSortFavorites\"\r\n    />\r\n\r\n\r\n    <div class=\"games-gallery\">\r\n\r\n        <GameCard \r\n\r\n            v-for=\"game in gamesFilteredGenreData\" \r\n            :key=\"game.id\"\r\n            :id=\"game.id\"\r\n            :title=\"game.title\"\r\n            :thumbnail=\"game.thumbnail\"\r\n            :short_description=\"game.short_description\"  \r\n            :genre=\"game.genre\"\r\n            :platform=\"game.platform\"\r\n\r\n            @toggleLike=\"toggleLike(game.id)\" \r\n            :isLiked=\"isGameLiked(game.id)\"\r\n       \r\n\r\n            :gridView=\"gridView\"     \r\n        />\r\n    \r\n             \r\n    </div>\r\n\r\n\r\n    <div v-if=\"search && searchingList.length == []\">\r\n        <h2>Oups</h2>\r\n        <p>Aucun résultat trouvé</p>\r\n\r\n    </div>\r\n\r\n    <div v-if=\"!search && searchingList.length == []\">\r\n        <h2>Loading ...</h2>\r\n        <i class=\"fas fa-spinner fa-pulse fa-xl\"></i>\r\n\r\n    </div>\r\n  \r\n  \r\n  </template>\r\n  \r\n  <script>\r\n\r\n    import { getCookie, setCookie } from '@/services/cookies/cookieUtils';\r\n  \r\n    import { getGamesData } from '@/services/api/gamesAPI';\r\n\r\n    \r\n\r\n    import GalleryOptions from './GalleryOptions.vue'\r\n    import GameCard from './GameCard.vue';\r\n  \r\n    export default {\r\n    name : 'GamesGallery',\r\n  \r\n    components : {\r\n        GameCard,\r\n        GalleryOptions\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            gamesData : [],\r\n\r\n            favorites : [],\r\n\r\n            search: localStorage.getItem(\"search\") || \"\",\r\n\t\t\tgamesSortType: localStorage.getItem(\"gamesSortType\") || \"default\",\r\n            gamesFilterPlat: localStorage.getItem(\"gamesFilterPlat\") || \"All\",\r\n            gamesFilterGenre: localStorage.getItem(\"gamesFilterGenre\") || \"default\",\r\n\r\n            gridView: localStorage.getItem(\"gridView\") === true,\r\n            \r\n           gamesSortFavorites: localStorage.getItem(\"gamesSortFavorites\") === true,\r\n        }\r\n    },\r\n\r\n    \r\n\r\n    created: function(){\r\n\r\n        this.retrieveGamesData();\r\n\r\n        const favoritesCookie = getCookie('favorites');\r\n        if (favoritesCookie) {\r\n            this.favorites = JSON.parse(favoritesCookie);\r\n        }\r\n\r\n    },\r\n\r\n    computed: {\r\n        searchingList(){\r\n            return this.gamesData.filter((gamesData) => {\r\n                return gamesData.title.toLowerCase().includes(this.search.toLowerCase());\r\n            })\r\n        },\r\n        \r\n        gamesOrganizedData: function() {\r\n            let sortedData = this.gamesData.slice()\r\n            const field = [\"AZName\", \"ZAName\"].includes(this.gamesSortType) ? \"title\" : [\"RecenttoOld\", \"OldtoRecent\"].includes(this.gamesSortType) ? \"release_date\" : [\"default\"].includes(this.gamesSortType);\r\n            const reversed = [\"ZAName\", \"OldtoRecent\"].includes(this.gamesSortType)\r\n            sortedData = this.searchingList.slice().sort((a, b) => {\r\n                if (field === \"title\") {\r\n                return a[field].localeCompare(b[field])\r\n                } else if (field === \"release_date\") {\r\n                return Date.parse(a[field]) - Date.parse(b[field])\r\n                }\r\n            })\r\n            if (reversed) sortedData = sortedData.reverse()\r\n            return sortedData\r\n\r\n        },\r\n\r\n        gamesFilteredPlatData: function() {        \r\n            let filteredData = this.gamesOrganizedData;\r\n            console.log(this.gamesFilterPlat)\r\n            if (this.gamesFilterPlat !== 'All') {\r\n                filteredData = filteredData.filter(item => item.platform === this.gamesFilterPlat);\r\n            }\r\n            return filteredData;\r\n        },\r\n\r\n        gamesFilteredGenreData: function() {\r\n        let filteredData = this.gamesFilteredPlatData;\r\n        if (this.gamesFilterGenre !== 'default') {\r\n            filteredData = filteredData.filter(game => game.genre === this.gamesFilterGenre);\r\n        }\r\n        return filteredData;\r\n        },\r\n\r\n\r\n        \r\n    },\r\n\r\n  \r\n    methods: {\r\n      \r\n        async retrieveGamesData(){\r\n            this.gamesData = await getGamesData()\r\n        },\r\n\r\n        isGameLiked(gameId) {\r\n            return this.favorites.includes(gameId);\r\n        },\r\n\r\n        toggleLike(gameId) {\r\n            const game = this.gamesFilteredGenreData.find(game => game.id === gameId);\r\n            if (game) {\r\n                game.isLiked = !game.isLiked;\r\n                \r\n                if (game.isLiked) {\r\n                    this.favorites.push(game.id);\r\n                } else {\r\n                    const index = this.favorites.indexOf(game.id);\r\n                    if (index !== -1) {\r\n                        this.favorites.splice(index, 1);\r\n                    }\r\n                }\r\n\r\n                setCookie('favorites', JSON.stringify(this.favorites), 30);\r\n                \r\n                console.log(document.cookie);\r\n                /* Supprimer les cookies si y a un soucis */\r\n                /*var Cookies = document.cookie.split(';');\r\n                // set past expiry to all cookies\r\n                for (var i = 0; i < Cookies.length; i++) {\r\n                document.cookie = Cookies[i] + \"=; expires=\"+ new Date(0).toUTCString();\r\n                }*/\r\n            }\r\n        },\r\n\r\n        toggleSortFavorites() {\r\n            this.gamesSortFavorites = !this.gamesSortFavorites;\r\n            localStorage.setItem(\"gamesSortFavorites\", this.gamesSortFavorites);\r\n\r\n            let favoritesData = this.gamesFilteredGenreData;\r\n            if (this.gamesSortFavorites !== true) {\r\n            favoritesData = favoritesData.filter(game => game.genre === this.gamesFilterGenre);\r\n            }\r\n            return favoritesData;\r\n\r\n    if (this.gamesSortFavorites) {\r\n      // Filtrer les jeux en fonction des favoris\r\n      this.gamesFilteredGenreData = this.gamesFilteredPlatData.filter(game =>\r\n        this.favorites.includes(game.id)\r\n      );\r\n    } else {\r\n      // Utiliser les jeux filtrés normalement\r\n      this.gamesFilteredGenreData = this.gamesFilteredPlatData;\r\n    }\r\n        },\r\n        \r\n    },\r\n}\r\n \r\n  </script>\r\n  \r\n  <style scoped>\r\n   .games-gallery{\r\n        display: flex;\r\n        justify-content: center;\r\n        flex-wrap: wrap;\r\n    }\r\n    \r\n  </style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}